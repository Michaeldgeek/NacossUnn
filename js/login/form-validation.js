webshims.register("form-validation",function(e,t,i,a,r,n){var o="webkitURL"in i,s=o&&Modernizr.formvalidation&&!t.bugs.bustedValidity,l=s&&parseFloat((navigator.userAgent.match(/Safari\/([\d\.]+)/)||["","999999"])[1],10),d=n.iVal.errorClass||"user-error",u=n.iVal.successClass||"user-success",c=n.iVal.errorWrapperClass||"ws-invalid",p=n.iVal.successWrapperClass||"ws-success",f=n.iVal.errorBoxClass||"ws-errorbox",h={checkbox:1,radio:1},v=e([]),m=function(){return!e.prop(this,"form")},g=function(t){t=e(t);var i,r,n=v;return"radio"==t[0].type&&(r=t.prop("form"),i=t[0].name,n=i?r?e(r).jProp(i):e(a.getElementsByName(i)).filter(m):t,n=n.filter('[type="radio"]')),n},y=function(t,i){var a;return e.each(t,function(t,r){return r?(a=t+e.prop(i,"validationMessage"),!1):void 0}),a},b=function(e){var t;try{t=a.activeElement.name===e}catch(e){}return t},w={radio:1,checkbox:1,"select-one":1,"select-multiple":1,file:1,date:1,month:1,week:1,text:1},V={time:1,date:1,month:1,datetime:1,week:1,"datetime-local":1},C=function(i){if(n.iVal.sel){var a,r,o,c;if(i.target&&(a=e(i.target).getNativeElement()[0],o=e(a).getShadowElement(),"submit"!=a.type&&e.prop(a,"willValidate")&&("change"!=i.type||!(c=o.prop("type"))||w[c]))){r=e.data(a,"webshimsswitchvalidityclass");var p=function(){if(c||(c=o.prop("type")),!(s&&("change"==i.type||537.36>l)&&V[c]&&e(i.target).is(":focus")||"focusout"==i.type&&"radio"==a.type&&b(a.name))){if(t.refreshCustomValidityRules&&"async"==t.refreshCustomValidityRules(a))return void e(a).one("refreshvalidityui",C);var r,n,p,f,v,m=e.prop(a,"validity");m.valid?o.hasClass(u)||(r=u,n=d,f="changedvaliditystate",p="changedvalid",h[a.type]&&a.checked&&g(a).not(a).removeClass(n).addClass(r).removeAttr("aria-invalid"),o.removeAttr("aria-invalid"),e.removeData(a,"webshimsinvalidcause")):(v=y(m,a),e.data(a,"webshimsinvalidcause")!=v&&(e.data(a,"webshimsinvalidcause",v),f="changedvaliditystate"),o.hasClass(d)||(r=d,n=u,h[a.type]&&!a.checked&&g(a).not(a).removeClass(n).addClass(r).attr("aria-invalid","true"),o.attr("aria-invalid","true"),p="changedinvalid")),r&&(o.addClass(r).removeClass(n),setTimeout(function(){e(a).trigger(p)},0)),f&&setTimeout(function(){e(a).trigger(f)},0),e.removeData(a,"webshimsswitchvalidityclass")}};r&&clearTimeout(r),"refreshvalidityui"==i.type?p():e.data(a,"webshimsswitchvalidityclass",setTimeout(p,9))}}};e(a.body||"html").on(n.validityUIEvents||"focusout change refreshvalidityui invalid",C).on("reset resetvalui",function(t){var i=e(t.target);i.is("form, fieldset")&&(i=i.jProp("elements")),i.filter(".user-error, .user-success").removeAttr("aria-invalid").removeClass("user-error").removeClass("user-success").getNativeElement().each(function(){e.removeData(this,"webshimsinvalidcause")}).trigger("resetvalidityui")});var E=function(){t.scrollRoot=e(o||"BackCompat"==a.compatMode?a.body:a.documentElement)},k=Modernizr.boxSizing||Modernizr["display-table"]||e.support.getSetAttribute||e.support.boxSizing?"minWidth":"width",T="transitionDelay"in a.documentElement.style,x={display:"inline-block",left:0,top:0,marginTop:0,marginLeft:0,marginRight:0,marginBottom:0};E(),t.ready("DOM",E),t.getRelOffset=function(t,i,a){var r,n;return t=e(t),e.swap(e(t)[0],x,function(){e.position&&a&&e.position.getScrollInfo?(a.of||(a.of=i),a.using=function(e,i){t.attr({"data-horizontal":i.horizontal,"data-vertical":i.vertical}),r=e},t.attr({"data-horizontal":"","data-vertical":"","data-my":a.my||"center","data-at":a.at||"center"}),t.position(a)):(r=e(i).offset(),n=t.offset(),r.top-=n.top,r.left-=n.left,r.top+=i.outerHeight())}),r},e.extend(t.wsPopover,{isInElement:function(t,i){return t==i||e.contains(t,i)},show:function(t){if(!this.isVisible){var r=e.Event("wspopoverbeforeshow");if(this.element.trigger(r),!r.isDefaultPrevented()){this.isVisible=!0,t=e(t||this.options.prepareFor).getNativeElement();var n=this,o=e(t).getShadowElement(),s=function(e){clearTimeout(n.timers.repos),n.timers.repos=setTimeout(function(){n.position(o)},e&&"pospopover"==e.type?4:200)};this.clear(),this.element.removeClass("ws-po-visible").css("display","none"),this.prepareFor(t,o),this.position(o),n.timers.show=setTimeout(function(){n.element.css("display",""),n.timers.show=setTimeout(function(){n.element.addClass("ws-po-visible").trigger("wspopovershow")},9)},9),e(a).on("focusin"+this.eventns+" mousedown"+this.eventns,function(e){!n.options.hideOnBlur||n.stopBlur||n.isInElement(n.lastElement[0]||a.body,e.target)||n.isInElement(t[0]||a.body,e.target)||n.isInElement(n.element[0],e.target)||n.hide()}),this.element.off("pospopover").on("pospopover",s),e(i).on("resize"+this.eventns+" pospopover"+this.eventns,s)}}},_getAutoAppendElement:function(){var t=/^(?:span|i|label|b|p|tr|thead|tbody|table|strong|em|ul|ol|dl|html)$/i;return function(i){for(var r,n=i[0],o=a.body;(n=n[r?"offsetParent":"parentNode"])&&1==n.nodeType&&n!=o;)r||t.test(n.nodeName)||(r=n),r&&"hidden"==e.style(n,"overflow")&&"static"!=e.style(n,"position")&&(r=!1);return e(r||o)}}(),prepareFor:function(t,i){var a,r,n=this,o={},s=e.extend(!0,{},this.options,t.jProp("form").data("wspopover")||{},t.data("wspopover"));this.lastOpts=s,this.lastElement=e(t).getShadowFocusElement(),this.prepared&&this.options.prepareFor||(r="element"==s.appendTo?t.parent():"auto"==s.appendTo?this._getAutoAppendElement(t):e(s.appendTo),this.prepared&&r[0]==this.element[0].parentNode||this.element.appendTo(r)),this.element.attr({"data-class":t.prop("className"),"data-id":t.prop("id")}),o[k]=s.constrainWidth?i.outerWidth():"",this.element.css(o),s.hideOnBlur&&(a=function(e){n.stopBlur?e.stopImmediatePropagation():n.hide()},n.timers.bindBlur=setTimeout(function(){n.lastElement.off(n.eventns).on("focusout"+n.eventns+" blur"+n.eventns,a),n.lastElement.getNativeElement().off(n.eventns)},10)),this.prepared=!0},clear:function(){e(i).off(this.eventns),e(a).off(this.eventns),this.element.off("transitionend"+this.eventns),this.stopBlur=!1,this.lastOpts=!1,e.each(this.timers,function(e,t){clearTimeout(t)})},hide:function(){var t=e.Event("wspopoverbeforehide");if(this.element.trigger(t),!t.isDefaultPrevented()&&this.isVisible){this.isVisible=!1;var a=this,r=function(t){t&&"transitionend"==t.type&&(t=t.originalEvent)&&t.target==a.element[0]&&"hidden"==a.element.css("visibility")||(a.element.off("transitionend"+a.eventns).css("display","none").attr({"data-id":"","data-class":"",hidden:"hidden"}),clearTimeout(a.timers.forcehide),e(i).off("resize"+a.eventns))};this.clear(),this.element.removeClass("ws-po-visible").trigger("wspopoverhide"),e(i).on("resize"+this.eventns,r),T&&this.element.off("transitionend"+this.eventns).on("transitionend"+this.eventns,r),a.timers.forcehide=setTimeout(r,T?600:40)}},position:function(e){var i=t.getRelOffset(this.element.removeAttr("hidden"),e,(this.lastOpts||this.options).position);this.element.css(i)}}),t.validityAlert=function(){n.messagePopover.position=e.extend({},{at:"left bottom",my:"left top",collision:"none"},n.messagePopover.position||{});var a=t.objectCreate(t.wsPopover,{},n.messagePopover),r=a.hide.bind(a);return a.element.addClass("validity-alert").attr({role:"alert"}),e.extend(a,{hideDelay:5e3,showFor:function(t,i,a,n){t=e(t).getNativeElement(),this.clear(),this.hide(),n||(this.getMessage(t,i),this.show(t),this.hideDelay&&(this.timers.delayedHide=setTimeout(r,this.hideDelay))),a||this.setFocus(t)},setFocus:function(a){var r=e(a).getShadowFocusElement(),o=t.scrollRoot.scrollTop()+(n.viewportOffset||0),s=r.offset().top-(n.scrollOffset||30),l=function(){try{r[0].focus()}catch(e){}e(i).triggerHandler("pospopover"+this.eventns)};o>s?t.scrollRoot.animate({scrollTop:s-5-(n.viewportOffset||0)},{queue:!1,duration:Math.max(Math.min(600,1.5*(o-s)),80),complete:l}):l()},getMessage:function(e,t){t||(t=e.getErrorMessage()),t?a.contentElement.text(t):this.hide()}}),a}();var I={slide:{show:"slideDown",hide:"slideUp"},fade:{show:"fadeIn",hide:"fadeOut"}};if(I[n.iVal.fx]||(n.iVal.fx="slide"),t.errorbox={create:function(t,i){i||(i=this.getFieldWrapper(t));var a=e("div."+f,i);return a.length||(a=e('<div class="'+f+'" hidden="hidden">'),i.append(a)),i.data("errorbox",a),a},getFieldWrapper:function(i){var a;return n.iVal.fieldWrapper&&(a="function"==typeof n.iVal.fieldWrapper?n.iVal.fieldWrapper.apply(this,arguments):e(i).parent().closest(n.iVal.fieldWrapper),a.length||(a=!1,t.error("could not find fieldwrapper: "+n.iVal.fieldWrapper))),a||(a=e(i).parent().closest(":not(span, label, em, strong, b, i, mark, p)")),a},_createContentMessage:function(){var t={},i=function(i){var a=e(i).data("errortype");return a||e.each(t,function(t,r){return e(i).is(r)?(a=t,!1):void 0}),a||"defaultMessage"};return e(function(){e.each(e("<input />").prop("validity"),function(e){if("valid"!=e){var i=e.replace(/[A-Z]/,function(e){return"-"+e.toLowerCase()});t[e]="."+i+", ."+e+", ."+e.toLowerCase()+', [data-errortype="'+e+'"]'}})}),function(t,a){var r=!1,n=e(t).data("errormessage")||{};"string"==typeof n&&(n={defaultMessage:n}),e("> *",a).each(function(){var t=i(this);n[t]||(r=!0,n[t]=e(this).html())}),r&&e(t).data("errormessage",n)}}(),get:function(t,i){i||(i=this.getFieldWrapper(t));var a=i.data("errorbox");return a?"string"==typeof a&&(a=e("#"+a),i.data("errorbox",a),this._createContentMessage(t,a)):(a=this.create(t,i),this._createContentMessage(t,a)),a},addSuccess:function(t,i){var a=e.prop(t,"type"),r=function(){var r=h[a]?e.prop(t,"checked"):e(t).val();i[r?"addClass":"removeClass"](p)},n=w[a]?"change":"blur";e(t).off(".recheckvalid").on(n+".recheckinvalid",r),r()},hideError:function(t,i){var a,r=this.getFieldWrapper(t),o=this.get(t,r);return o&&o.jquery&&(e(t).filter("input").off(".recheckinvalid"),!i&&(a=e("input:invalid, select:invalid, textarea:invalid",r)[0])?e(a).trigger("refreshvalidityui"):(r.removeClass(c),o.message="",o[I[n.iVal.fx].hide](function(){e(this).attr({hidden:"hidden"})}))),i||a||this.addSuccess(t,r),r},recheckInvalidInput:function(t){if(n.iVal.recheckDelay&&n.iVal.recheckDelay>90){var i,a=function(){C({type:"input",target:t})};e(t).filter('input:not([type="checkbox"], [type="radio"])').off(".recheckinvalid").on("input.recheckinvalid",function(){clearTimeout(i),i=setTimeout(a,n.iVal.recheckDelay)}).on("focusout.recheckinvalid",function(){clearTimeout(i)})}},showError:function(t){var i=this.getFieldWrapper(t),a=this.get(t,i),r=e(t).getErrorMessage();return a.message!=r&&(a.stop(!0,!0).html("<p>"+r+"</p>"),a.message=r,i.addClass(c).removeClass(p),this.recheckInvalidInput(t),(a.is("[hidden]")||"none"==a.css("display"))&&a.css({display:"none"}).removeAttr("hidden")[I[n.iVal.fx].show]()),i.removeClass(p),e(t).off(".recheckvalid"),i},reset:function(e){this.hideError(e,!0).removeClass(p)},toggle:function(t){e(t).is(":invalid")?this.showError(t):this.hideError(t)}},e(a.body).on({changedvaliditystate:function(i){if(n.iVal.sel){var a=e(i.target).jProp("form");a.is(n.iVal.sel)&&t.errorbox.toggle(i.target)}},resetvalidityui:function(i){if(n.iVal.sel){var a=e(i.target).jProp("form");a.is(n.iVal.sel)&&t.errorbox.reset(i.target)}},firstinvalid:function(i){if(n.iVal.sel&&n.iVal.handleBubble){var a=e(i.target).jProp("form");a.is(n.iVal.sel)&&(i.preventDefault(),"none"!=n.iVal.handleBubble&&t.validityAlert.showFor(i.target,!1,!1,"hide"==n.iVal.handleBubble))}},submit:function(t){return n.iVal.sel&&!n.iVal.noSubmitCheck&&e(t.target).is(n.iVal.sel)&&e.prop(t.target,"noValidate")&&!e(t.target).checkValidity()?(t.stopImmediatePropagation(),!1):void 0}}),t.modules["form-core"].getGroupElements=g,n.replaceValidationUI&&t.ready("DOM forms",function(){e(a).on("firstinvalid",function(e){e.isInvalidUIPrevented()||(e.preventDefault(),t.validityAlert.showFor(e.target))})}),function(){var t,i,r=[];e(a).on("invalid",function(n){if(!n.wrongWebkitInvalid){var o=e(n.target);if(!t){t=e.Event("firstinvalid"),t.isInvalidUIPrevented=n.isDefaultPrevented;var s=e.Event("firstinvalidsystem");e(a).triggerHandler(s,{element:n.target,form:n.target.form,isInvalidUIPrevented:n.isDefaultPrevented}),o.trigger(t)}t&&t.isDefaultPrevented()&&n.preventDefault(),r.push(n.target),n.extraData="fix",clearTimeout(i),i=setTimeout(function(){var i={type:"lastinvalid",cancelable:!1,invalidlist:e(r)};t=!1,r=[],e(n.target).trigger(i,[i])},9),o=null}})}(),s&&540>l&&!function(){var t=/^(?:textarea|input)$/i,r=!1;a.addEventListener("contextmenu",function(e){t.test(e.target.nodeName||"")&&(r=e.target.form)&&setTimeout(function(){r=!1},1)},!1),e(i).on("invalid",function(e){e.originalEvent&&r&&r==e.target.form&&(e.wrongWebkitInvalid=!0,e.stopImmediatePropagation())})}(),!e.event.special.change&&!e.event.special.input&&Modernizr.inputtypes&&n.fixRangeChange){var P={trigger:function(t){P.blockElement&&(P.blockElement=!1,setTimeout(function(){P.requestedChange&&P.value!=P.requestedChange.value&&e(P.requestedChange).trigger("change"),P.value=!1},9))},lastValue:!1,updateInputValue:function(e){P.lastValue=e.target.value},triggerInput:function(t){P.lastValue!==!1&&P.lastValue!=t.target.value&&e(t.target).trigger("input")},inputTeardown:function(t){e(t.target).off("input",P.updateInputValue).off("blur",P.inputTeardown),P.lastValue=!1},inputSetup:function(t){"range"==t.target.type&&(P.inputTeardown(t),P.lastValue=t.target.value,e(t.target).on("input",P.updateInputValue).on("blur",P.inputTeardown))}};e.each([{name:"key",evt:"keyup"},{name:"mouse",evt:"mouseup"},{name:"touch",evt:"touchend"}],function(t,i){var r=(i.name+"Setup",i.name+"Commit");P[i.name+"Block"]=function(t){P.blockElement||"range"!=t.target.type||(P.blockElement=t.target,P.value=t.target.value,e(P.blockElement).off("blur",P.trigger).on("blur",P.trigger),e(a.body).off(i.evt,P[r]).on(i.evt,P[r]))},P[r]=function(t){e(a.body).off(i.evt,P[r]),P.trigger()}}),e(a.body||"html").on({mousedown:P.mouseBlock,"keydown kepress":function(e){e.keyCode<45&&e.keyCode>30&&P.keyBlock(e)},touchstart:P.touchBlock,focusin:P.inputSetup}),e.extend(!0,e.event.special,{change:{handle:function(e){return e.isTrigger||P.blockElement!=e.target?(P.requestedChange==e.target&&(P.requestedChange=!1),void e.handleObj.handler.apply(this,arguments)):(P.requestedChange=e.target,P.triggerInput(e),!1)}},input:{handle:function(){var t,i,a=function(){i&&e(i).off("change",a),t=!1,i=!1},r=function(r){a(r),i=r.target,t=r.target.value,e(r.target).on("change",a)};return function(e){var a;if(!e.isTrigger&&"range"==e.target.type)if(i!=e.target)r(e);else if(i==e.target){if(t==(a=e.target.value))return!1;t=e.target.value}e.handleObj.handler.apply(this,arguments)}}()}})}});